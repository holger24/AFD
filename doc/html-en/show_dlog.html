<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>AFD (show_dlog.html)</title>
</head>
<body bgcolor="#F0ECD6">
<h1 align=center><a name="show_dlog">Delete Log Window</a></h1>
<hr size=3 noshade>
<p>
<center><img src="../images/show_dlog_small.png" alt="[image of show_dlog dialog]"></center>
</p>
<p>
All files deleted by AFD are logged to the file $AFD_WORK_DIR/log/DELETE_LOG.?,
described in more details in <a href="log.html#delete_log">log section</a>.
These log files can be viewed with the help of show_dlog. Since the delete log
can be very extensive, there are lots of possibility to reduce the search
time by filling in some of the following values:
</p>
<p>
<center><img src="../images/show_dlog_selection.gif" alt="[closeup of the selection part]"></center>
</p>
<p>
<center>
<table border>
<tr>
   <td>&nbsp;<b>1</b>&nbsp;</td>
   <td>Enter the start and end time of the search. If no value is entered
       it will always take the earliest or latest entries it finds. There
       are two time forms. One is the absolute and the other is the
       relative time format. The following absolute forms are possible:
       MMDDhhmm, DDhhmm and hhmm (MM = month [01-12], DD = day [01-31],
       hh = hour [00 - 23], mm = minute [00 - 59]). The relative form
       always starts with a hyphen '-' and has the following format:
       -DDhhmm, -hhmm or -mm.</td>
</tr>
<tr>
   <td>&nbsp;<b>2</b>&nbsp;</td>
   <td>Shows the current date and time in the following format:
       DD.MM.YYYY hh:mm</td>
</tr>
<tr>
   <td>&nbsp;<b>3</b>&nbsp;</td>
   <td>Enter a file name. The name may have any number of the two following
       wild cards: * and ?. If no file name or wild card is entered it will
       always search for all file names. Multiple file names/patterns
       can be entered by separating them with a pipe (|).</td>
</tr>
<tr>
   <td>&nbsp;<b>4</b>&nbsp;</td>
   <td>Here it is possible to enter the length/size of a file. If a &lt; or
       a &gt; sign is put before the size value, it will search for files
       less then or greater then the given size.</td>
</tr>
<tr>
   <td>&nbsp;<b>5</b>&nbsp;</td>
   <td>The source directory where the AFD has picked up the file. Even here
       it is possible to enter wild cards. Sometimes it can be easier if
       you just enter the directory ID. However this must have a leading
       &#35; for it to be detected as directory ID. One can also enter
       the directory alias with a leading @ sign. Multiple directory
       names and/or ID's can be entered by separating them with a comma (,).</td>
</tr>
<tr>
   <td>&nbsp;<b>6</b>&nbsp;</td>
   <td>Here you can enter a remote host name and only files that where
       send to this host will be shown. It is also possible to enter more
       then one host, by separating the hosts with a comma (,). Wild cards
       can also be used.</td>
</tr>
<tr>
   <td>&nbsp;<b>7</b>&nbsp;</td>
   <td><p>
       <center><img src="../images/select_delete_reasons.png" alt="[window
       showing possible delete reasons]"></center>
       </p>
       Pressing the Delete reason button will popup another window
       allowing to choose from a list of delete reasons to allow the
       user to narrow down the search where or why the file was deleted:
       <table border>
       <tr>
          <td>Age-limit(O)</td>
          <td>Files deleted due to some age limit being reached on output.</td>
       </tr>
       <tr>
          <td>Age-limit(I)</td>
          <td>Files deleted due to some age limit being reached on input.</td>
       </tr>
       <tr>
          <td>User delete</td>
          <td>Deleted by some user action.</td>
       </tr>
       <tr>
          <td>Exec delete</td>
          <td>Deleted because the <a href="dir_config.html#exec">exec</a>
              option failed and deletion was configured in this case.</td>
       </tr>
       <tr>
          <td>Missing msg</td>
          <td>Process fd had to delete the data for this job because the
              message file in $AFD_WORK_DIR/messages could not be
              read for what ever reason.</td>
       </tr>
       <tr>
          <td>Duplicate(I)</td>
          <td>Duplicate files deleted on input. See directory option
              <a href="dir_config.html#dupcheck_input">dupceck</a>.</td>
       </tr>
       <tr>
          <td>Duplicate(O)</td>
          <td>Duplicate files deleted on output. See option
              <a href="dir_config.html#dupcheck_output">dupceck</a>.</td>
       </tr>
       <tr>
          <td>Unknown file</td>
          <td>There was no rule to distribute this file and the directory
              option <a href="dir_config.html#delete_unknown_files">delete
              unknown files</a> is set or the system default
              was set to delete this.</td>
       </tr>
       <tr>
          <td>Job ID error</td>
          <td>The given job ID was not found, thus it no longer exists
              within AFD and all data for this job is deleted.</td>
       </tr>
       <tr>
          <td>Old lock file</td>
          <td>The directory option <a href="dir_config.html#delete_old_locked_files">
              delete old locked files</a> is set and the locked file is older
              then the specified locked file modification time and was thus
              deleted.</td>
       </tr>
       <tr>
          <td>Queued file</td>
          <td>The directory option <a href="dir_config.html#delete_queued_files">
              delete queued files</a> is set and the file in the queue was
              deleted because it was older then the specified time.</td>
       </tr>
       <tr>
          <td>Delete option</td>
          <td>This file was deleted due to the <a href="dir_config.html#delete">
              delete</a> option in DIR_CONFIG.</td>
       </tr>
       <tr>
          <td>Del stale job</td>
          <td>This file was deleted by process fd because either, the syntax
              of calling sf_xxx/gf_xxx is wrong, the sf_xxx could not
              determine the job ID or the FTP LIST command has failed.</td>
       </tr>
       <tr>
          <td>Update DB del</td>
          <td>An update database was issued either with <a href=
              "tools.html#udc">udc</a> or <a href="afd_ctrl.html#reread_dir_config">
              Reread DIR_CONFIG</a> and data for a job that no longer
              existed has been deleted.</td>
       </tr>
       <tr>
          <td>Other proc</td>
          <td>The file was deleted because another process was sending
              the same file name to the same destination at the same
              time.</td>
       </tr>
       <tr>
          <td>Del pool dir</td>
          <td>The pool directory and its contents was deleted because
              the job could no longer be located.</td>
       </tr>
       <tr>
          <td>Exec stored</td>
          <td>The <a href="dir_config.html#exec">exec</a> option was
              specified with the -s option but AFD failed to store
              the file.</td>
       </tr>
       <tr>
          <td>Host disabled</td>
          <td>Data was deleted because the host has been disabled.</td>
       </tr>
       <tr>
          <td>Convert fail</td>
          <td>The conversion <a href="dir_config.html#fax2gts">fax2gts</a>
              or <a href="dir_config.html#tiff2gts">tiff2gts</a> has
              failed so the data was deleted.</td>
       </tr>
       <tr>
          <td>Rename overwr</td>
          <td>The <a href="dir_config.html#basename">basename</a>,
              <a href="dir_config.html#extension">extension</a> or
              <a href="dir_config.html#rename">rename</a> was specified
              with the overwrite option anfd data has been
              overwritten due to having the same name.</td>
       </tr>
       <tr>
          <td>Mail recp rej</td>
          <td>The mail server rejects the mail recipient. Most properly
              because the recipient is not known by the mail server.</td>
       </tr>
       </table>
   </td>
</tr>
<tr>
   <td>&nbsp;<b>8</b>&nbsp;</td>
   <td>These toggle buttons allow the user to toggle between different length
       of the file name in the list box. The short one is useful when
       printing on A4 paper.</td>
</tr>
</table>
</center>
</p>
<p>
It is not necessary to fill in any values, however then the search might
take a very long time for it to finish, depending on how long and how many
log files there are. While the dialog is searching for data, the function
of the search button changes into a stop button, enabling the user to
interrupt the search. This button and the slider of the list widget are the
only buttons that are active during a search. Thus, the user can search in
the list widget by using the slider, while the dialog is still searching.
Once a search is interrupted, the search will always start from the beginning.
</p>
<p>
Here follows a short description of the list widgets and the meaning of
each item:
</p>
<p>
<center><img src="../images/show_ilog_list.png" alt="[closeup of the list]"></center>
</p>
<p>
<center>
<table border>
<tr>
   <td>Date</td>
   <td>The date in the following format: MM.DD. where MM is the month
       (01-12) and DD is the day of the month (01-31).</td>
</tr>
<tr>
   <td>Time</td>
   <td>The time in the following format: hh:mm:ss where hh is the hour
       (00-23), mm is the minute (00-59) and ss is the second (00-59).</td>
</tr>
<tr>
   <td>File name</td>
   <td>The file name of the file that was deleted.</td>
</tr>
<tr>
   <td>File size</td>
   <td>The size of the distributed file in bytes.</td>
</tr>
<tr>
   <td>Hostname</td>
   <td>The hostname where it was suppose to be send.</td>
</tr>
<tr>
   <td>Reason</td>
   <td>A short reason why the file was deleted.</td>
</tr>
<tr>
   <td>Process/User</td>
   <td>The process or user deleting the file. Sometimes there are some
       additional reasons why the file was deleted.</td>
</tr>
</table>
</center>
</p>
<p>
When the file name is longer then it is shown in the list widget it is
still possible to view it by using the 'AFD info click'. This is done
by pressing the right mouse button while the cursor is over the wanted
item in the list widget. The following window will pop up for a file
deleted on output:
</p>
<p>
<center><img src="../images/show_dlog_info_out.png" alt="[info dialog]"></center>
</p>
<p>
For a file deleted on input this looks a bit different:
</p>
<p>
<center><img src="../images/show_dlog_info_in.png" alt="[info dialog]"></center>
</p>
<p>
Sometimes there can be a lot less information since the process deleting
does not have more.
</p>
<p>
As shown, this window also shows what the entry in the DIR_CONFIG looked
like when this file was deleted. Thus it is always possible for the AFD
system administrator to see with what options the files are deleted,
regardless how many changes there where in the DIR_CONFIG file.
</p>
<p>
Right under the list widget is a summary line which looks as follows:
</p>
<p>
<center><img src="../images/show_dlog_summary.png" alt="[closeup of the summary line]"></center>
</p>
<p>
<center>
<table border>
<tr>
   <td>&nbsp;<b>1</b>&nbsp;</td>
   <td>The time in days from the first entry found to the last entry in
       the list.</td>
</tr>
<tr>
   <td>&nbsp;<b>2</b>&nbsp;</td>
   <td>The rest time in hours, minutes and seconds.</td>
</tr>
<tr>
   <td>&nbsp;<b>3</b>&nbsp;</td>
   <td>The total number of files found.</td>
</tr>
<tr>
   <td>&nbsp;<b>4</b>&nbsp;</td>
   <td>The average number of files transmitted. This is calculated from
       the values found in 1, 2 and 3.</td>
</tr>
<tr>
   <td>&nbsp;<b>5</b>&nbsp;</td>
   <td>Total number of bytes transferred.</td>
</tr>
</table>
</center>
</p>
<p>
Under the summary line follows a status line showing the current status,
here how long it took for the search:
</p>
<p>
<center><img src="../images/show_xlog_status.png" alt="[closeup of the status line]"></center>
</p>
<p>
At the bottom is a line with three buttons which have the following meaning:
</p>
<p>
<center><img src="../images/show_ilog_button_line.png" alt="[closeup of the button line]"></center>
</p>
<p>
<center>
<table border>
<tr>
   <td>&nbsp;<b>Search</b>&nbsp;</td>
   <td>Pressing this button will start the search. During the search the
       name of the button will change to Stop. Pressing this will interrupt
       the search and the button will be renamed to Search again. Pressing
       search again will start the search from the beginning and not where
       it was when it was interrupted.</td>
   <td>&nbsp;</td>
</tr>
<tr>
   <td>&nbsp;<b>Print</b>&nbsp;</td>
   <td>This will popup another dialog which can be used to print what is shown
       to a separate file, send it in a mail to someone or print it to a
       printer. The Range field allows to specify what will be printed,
       either what has been selected or everything.</td>
   <td align=center><img src="../images/print_data.png"></td>
</tr>
<tr>
   <td>&nbsp;<b>Close</b>&nbsp;</td>
   <td>Closes this dialog.</td>
   <td>&nbsp;</td>
</tr>
</table>
</center>
</p>
<hr size=3 noshade>
<table width="100%">
<tr>
   <td width="90%"><small><address>
   Copyright &copy; 2005 - 2023 by H.Kiehl<br>
   <a href="mailto:Holger.Kiehl@dwd.de?subject=AFD Homepage">Holger.Kiehl@dwd.de</a><br>
   Last updated: 04.03.2023
   </address></small></td>
   <td nowrap><small><img align=middle src="../images/reddot.gif" alt="[red dot]"><a href="contents.html">Index</a></small></td>
   <td nowrap><small><img align=middle src="../images/reddot.gif" alt="[red dot]"><a href="index.html">Home</a></small></td>
   <!-- Insert site specific logo -->
</tr>
</table>
</body>
</html>
